# CarScan Pro 使用ガイド

## 基本的な使用方法

### 1. 動画の準備
- MP4形式の動画ファイルを準備
- 分析対象（車両、物体）がはっきり見える動画を推奨
- 解像度は720p以上を推奨

### 2. アプリケーションの起動
1. ブラウザで `carscan.html` を開く
2. または、ローカルサーバーを起動してアクセス

### 3. 動画の読み込み
1. 「MP4ファイルを選択」をクリック
2. 分析したい動画ファイルを選択
3. 動画が読み込まれるまで待機

## 各分析モードの詳細

### 📏 寸法測定モード

#### 目的
物体の実際のサイズを測定する

#### 手順
1. 「寸法測定」を選択
2. 動画を測定したいフレームで一時停止
3. 「現在のフレームで寸法測定開始」をクリック
4. 参照オブジェクトの実際のサイズを入力（mm単位）
5. 参照オブジェクトの両端をクリック
6. 測定したい対象の両端をクリック
7. 結果が自動計算される

#### コツ
- 参照オブジェクトは既知のサイズのもの（車線幅、標識など）を使用
- 測定対象と参照オブジェクトは同じ平面上にあることが理想

### 🚗 対向車進路分析モード

#### 目的
車両の角度変化を分析して進路変更を検出

#### 手順
1. 「進路分析」を選択
2. 最初のフレームで動画を一時停止
3. 「このフレームをキャプチャ (1回目)」をクリック
4. 「この車両をマーク (1回目)」をクリック
5. 車両の代表的な2点をクリック（例：前面の両端）
6. 動画を数フレーム進める
7. 「このフレームをキャプチャ (2回目)」をクリック
8. 同じ車両の対応する2点を再度クリック
9. 角度変化が計算される

#### コツ
- 車両の特徴的な部分（ヘッドライト、グリルなど）を目印にする
- フレーム間の時間差は1-3秒程度が適切

### ⚡ 速度解析モード

#### 目的
車両の移動速度を計算

#### 手順
1. 「速度解析」を選択
2. 参照距離（既知の距離）を入力
3. フレームレートを入力（通常30fps）
4. 「速度解析開始」をクリック
5. 参照距離の両端をクリック
6. 車両の初期位置をクリック
7. 車両の終了位置をクリック
8. 速度が計算される

#### コツ
- 参照距離は車線幅（3.5m）や標識間距離など正確な値を使用
- 車両の同じ部分（重心など）を一貫して指定

### 📈 軌跡追跡モード

#### 目的
複数車両の移動軌跡を記録・分析

#### 手順
1. 「軌跡追跡」を選択
2. 追跡する車両を選択（車両1-4）
3. 動画を再生しながら車両位置をクリック
4. 「ポイント追加」で軌跡を記録
5. 必要に応じて他の車両も追跡
6. 「再生表示」で軌跡を確認

#### コツ
- 定期的にポイントを追加（1秒間隔など）
- 車両が画面から出る前に十分なポイントを取得

## 便利な機能

### ズーム・パン機能
- 「+」「-」ボタンでズームイン・アウト
- ズーム後はドラッグで表示範囲を移動可能
- 「リセット」で元の表示に戻る

### データエクスポート
- 「データエクスポート」で分析結果をJSON形式で保存
- 後でデータを再利用可能

### モードリセット
- 「現在のモードをリセット」で分析を最初からやり直し

## トラブルシューティング

### 動画が読み込まれない
- MP4形式の動画ファイルかどうか確認
- ファイルサイズが大きすぎないか確認
- ブラウザを再読み込み

### 測定結果が不正確
- 参照オブジェクトのサイズが正確か確認
- 測定対象と参照オブジェクトが同一平面上にあるか確認
- ズーム機能を使ってより正確にポイントを指定

### パフォーマンスが悪い
- 動画解像度を下げる
- ブラウザの他のタブを閉じる
- より高性能なデバイスを使用

## サポート

問題や質問がある場合は、GitHubのIssuesページでお気軽にお問い合わせください。
